{"version":3,"sources":["scripts/main.js"],"names":["head","document","querySelector","body","count","addEventListener","e","sort","target","cellIndex","sorted","children","a","b","one","cells","innerText","two","includes","replace","localeCompare","append","reverse","rows","forEach","row","classList","contains","remove","parentNode","add","form","createElement","insertAdjacentHTML","editingArea","input","querySelectorAll","options","pushNotification","title","description","type","div","p","h2","dataset","qa","setTimeout","preventDefault","salary","Intl","NumberFormat","format","value","nameEmp","age","Number","position","length","item","isCorrect","editStart","td","elem","data","innerHTML","cellOffice","className","focus","onblur","office","selectedIndex","onkeydown","enter","key","cellInput","placeholder","setAttribute","validate","editEnd","changeIsCorrect","index","cell","test","trim","isOk","firstChild","toLocaleString","style","currency","slice","doubleClick","closest","newInput","parentElement"],"mappings":"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","file":"main.2f227465.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst head = document.querySelector('thead');\nconst body = document.querySelector('tbody');\n\nlet count = 0;\n\nhead.addEventListener('click', (e) => {\n  const sort = e.target.cellIndex;\n\n  count++;\n\n  const sorted = [...body.children].sort((a, b) => {\n    let one = a.cells[sort].innerText;\n    let two = b.cells[sort].innerText;\n\n    if (one.includes('$')) {\n      one = one.replace(/[$,]/g, '');\n      two = two.replace(/[$,]/g, '');\n\n      return one - two;\n    }\n\n    return one.localeCompare(two);\n  });\n\n  if (count % 2 === 1) {\n    body.append(...sorted);\n  } else {\n    body.append(...sorted.reverse());\n  }\n});\n\nbody.addEventListener('click', (e) => {\n  const target = e.target;\n\n  [...body.rows].forEach(row => row.classList.contains('active')\n    ? row.classList.remove('active')\n    : target.parentNode.classList.add('active'));\n});\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\ndocument.body.append(form);\n\nform.insertAdjacentHTML('afterbegin', `\n<label>\n  Name:\n    <input name=\"name\" data-qa=\"name\" type=\"text\" min = '4'>\n</label>\n<label>\n  Position:\n    <input \n      name=\"position\"\n      data-qa=\"position\"\n      type=\"text\"\n    >\n</label>\n<label>\n  Office: \n    <select\n      name=\"office\"\n      data-qa=\"office\"\n      type=\"text\"\n    >\n        <option>Tokyo</option>\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n    </select>\n</label>\n<label>\n  Age: \n    <input \n      name=\"age\"\n      data-qa=\"age\" \n      type=\"number\"\n    >\n</label>\n<label>\n  Salary:\n    <input \n      name=\"salary\"\n      data-qa=\"salary\" \n      type=\"number\" \n      min = '0'\n    >\n</label>\n<button type='submit'>Save to table</button>\n`);\n\nconst input = [...form.querySelectorAll('input')];\nconst options = form.querySelector('option').innerText;\n\nconst pushNotification = (title, description, type) => {\n  const div = document.createElement('div');\n  const p = document.createElement('p');\n  const h2 = document.createElement('h2');\n\n  div.dataset.qa = 'notification';\n  div.classList.add('notification', type);\n\n  p.innerText = description;\n  h2.innerText = title;\n\n  div.append(h2);\n  div.append(p);\n  document.body.append(div);\n\n  setTimeout(() => div.remove(), 5000);\n};\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const salary = '$' + new Intl.NumberFormat('en-GB').format(input[3].value);\n  const nameEmp = input[0].value;\n  const age = Number(input[2].value);\n  const position = input[1].value;\n\n  if (nameEmp.length < 4) {\n    pushNotification('Oops!',\n      'Name must be longer than 4 letters', 'error');\n  } else if (age < 18 || age > 90) {\n    pushNotification('Oh no!',\n      'Age must be between 18 & 90 years', 'error');\n  } else if (!position) {\n    pushNotification('Error',\n      'Please enter the position', 'error');\n  } else if (!input[3].value) {\n    pushNotification('Error', 'Please enter the salary', 'error');\n  } else {\n    body.insertAdjacentHTML('beforeend', `\n      <tr>\n        <td>${nameEmp}</td>\n        <td>${position}</td>\n        <td>${options}</td>\n        <td>${age}</td>\n        <td>${salary}</td>\n        </tr>\n      `);\n    pushNotification('Success', 'New employee was added', 'success');\n\n    input.forEach(item => {\n      item.value = '';\n    }\n    );\n  }\n});\n\nlet editingArea;\nlet isCorrect = true;\n\nbody.addEventListener('dblclick', doubleClick => {\n  const target = doubleClick.target.closest('td');\n  const newInput = document.querySelector('.cell-input');\n\n  if (newInput) {\n    pushNotification(\n      'Error',\n      'Please finish this changes',\n      'error'\n    );\n\n    return editStart(newInput.parentElement);\n  }\n\n  if (!target) {\n    return;\n  }\n\n  editStart(target);\n});\n\nfunction editStart(td) {\n  editingArea = {\n    elem: td,\n    data: td.innerHTML,\n  };\n\n  if (td.cellIndex === 2) {\n    const cellOffice = document.createElement('select');\n\n    cellOffice.className = 'cell-input';\n\n    cellOffice.innerHTML = `\n      <select name=\"office\"\n              data-qa=\"office\" \n              type=\"text\"\n              class=\"cell-input\"\n              class=\"temporary\"\n      >\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    `;\n\n    td.innerHTML = '';\n    td.append(cellOffice);\n    cellOffice.focus();\n\n    cellOffice.onblur = () => {\n      const office = cellOffice.selectedIndex;\n\n      td.innerHTML = cellOffice[office].value;\n\n      if (cellOffice.selectedIndex === 0) {\n        td.innerHTML = editingArea.data;\n      }\n\n      pushNotification(\n        'Success',\n        'Changes exepted',\n        'success');\n    };\n\n    cellOffice.onkeydown = (enter) => {\n      if (enter.key === 'Enter') {\n        cellOffice.onblur();\n      }\n    };\n  } else {\n    const cellInput = document.createElement('input');\n\n    cellInput.className = 'cell-input';\n    cellInput.innerHTML = td.innerHTML;\n    cellInput.placeholder = td.innerHTML;\n    td.innerHTML = '';\n    td.append(cellInput);\n    cellInput.focus();\n\n    switch (td.cellIndex) {\n      case 0:\n      case 1:\n        cellInput.setAttribute('type', 'text');\n        break;\n\n      case 3:\n      case 4:\n        cellInput.setAttribute('type', 'number');\n        break;\n    }\n\n    cellInput.onblur = (e) => {\n      validate(td.cellIndex, cellInput);\n      editEnd(editingArea.elem, isCorrect);\n      changeIsCorrect();\n    };\n\n    cellInput.onkeydown = (enter) => {\n      if (enter.key === 'Enter') {\n        cellInput.onblur();\n      }\n    };\n  }\n};\n\nfunction validate(index, cell) {\n  switch (index) {\n    case 0:\n    case 1:\n      if (/\\d/.test(cell.value)\n        || cell.value.trim().length < 4) {\n        isCorrect = false;\n\n        pushNotification(\n          'Errir',\n          'Name must be longer than 4 letters',\n          'error');\n      }\n\n      break;\n\n    case 3:\n      if (cell.value < 18\n        || cell.value > 90) {\n        if (cell.value === '') {\n          isCorrect = false;\n\n          return;\n        }\n\n        isCorrect = false;\n\n        pushNotification(\n          'Error',\n          'Age must be between 18 & 90 years',\n          'error');\n      }\n\n      break;\n\n    case 4:\n      if (+cell.value <= 0) {\n        if (cell.value === '') {\n          isCorrect = false;\n\n          return;\n        }\n\n        isCorrect = false;\n\n        pushNotification(\n          'Error',\n          'Enter the salary',\n          'error');\n      }\n\n      break;\n  }\n}\n\nfunction editEnd(td, isOk) {\n  if (isOk) {\n    switch (td.cellIndex) {\n      case 4:\n        td.innerHTML = `${(+td.firstChild.value)\n          .toLocaleString('en-US', {\n            style: 'currency',\n            currency: 'USD',\n          })\n          .slice(0, -3)}`;\n\n        pushNotification(\n          'Success',\n          'The salary was changed.',\n          'success');\n        break;\n\n      case 0:\n      case 1:\n      case 3:\n        td.innerHTML = td.firstChild.value;\n\n        pushNotification(\n          'Changed successfully!',\n          'Changes was added',\n          'success');\n        break;\n    }\n  } else {\n    if (td.firstChild.value === '') {\n      td.innerHTML = editingArea.data;\n\n      return;\n    }\n\n    return editStart(td);\n  }\n\n  editingArea = null;\n};\n\nfunction changeIsCorrect() {\n  isCorrect = true;\n}\n"]}